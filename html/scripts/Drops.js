// Generated by CoffeeScript 1.6.3
(function() {
  this.Drops = (function() {
    var desk, i, lin, outerContainer, particle, svg, z;

    svg = null;

    desk = null;

    outerContainer = null;

    z = d3.scale.category20c();

    i = 0;

    lin = function(x) {
      return x;
    };

    particle = function(logRecord) {
      var h, rand, w, xx, yy;
      w = outerContainer.width();
      h = outerContainer.height();
      xx = w * Math.random();
      rand = Math.random();
      yy = h * rand * 0.1 + h / 2;
      return svg.append("svg:circle").attr("cx", xx).attr("cy", yy - 200).attr("r", 2).style("fill", "white").style("fill-opacity", 0.1).transition().duration(500).ease("bounce").attr("cy", yy).style("fill-opacity", 0.1 + rand).remove().each("end", function() {
        var r;
        r = 10 + 80 * rand;
        return svg.append("svg:ellipse").attr("cx", xx).attr("cy", yy).attr("rx", 1).attr("ry", 1).style("fill", "transparent").style("fill-opacity", 1).style("stroke", "white").style("stroke-opacity", 0.1 + rand).style("stroke-width", 1).transition().duration(1000).ease("linear").attr("rx", r).attr("ry", r * 0.2).style("stroke-width", 1 + 2 * rand).style("stroke-opacity", 1e-6).remove();
      });
    };

    Drops.prototype.clear = function() {
      return desk.html("");
    };

    Drops.prototype.write = function(text) {
      return desk.html(desk.html() + text);
    };

    Drops.prototype.show = function(log, startTime, period) {
      var rec, records, _i, _len, _results;
      if (startTime == null) {
        startTime = 10;
      }
      if (period == null) {
        period = 0.5;
      }
      if (!log) {
        return;
      }
      records = log.getPastRecords(startTime, period);
      _results = [];
      for (_i = 0, _len = records.length; _i < _len; _i++) {
        rec = records[_i];
        _results.push(particle(rec));
      }
      return _results;
    };

    function Drops(containerSelector) {
      outerContainer = $(containerSelector);
      svg = d3.select("#dropSvg");
    }

    return Drops;

  })();

}).call(this);

/*
//@ sourceMappingURL=Drops.map
*/
